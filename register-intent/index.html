<script type="text/javascript">
    RED.nodes.registerType("注册意图", {
        category: 'AI 意图',
        color: '#7c7f93',
        icon:"font-awesome/fa-registered",
        defaults: {
            name: { value: "", required: true, validate: RED.validators.regex(/^[a-zA-Z0-9_-]{1,64}$/) },
            description: { value: "", required: true},
            excludeFromOpenAi: { value: false }, 
        },
        inputs: 0,
        outputs: 1,
        label: function () {
            return this.name || "注册意图";
        },

    });


</script>

<script type="text/html" data-template-name="注册意图">

    <!-- <div style="display: flex; justify-content: center; margin-bottom: 25px;">
        <a href="https://youtu.be/oWP8es4g4D0" target="_blank" referrerpolicy="no-referrer"
            style="color: #f53b57"><i class="fa fa-youtube"></i><span style="padding-left: 10px;">Watch
            Register Intent Node Tutorial</span></a>
    </div> -->
    
    <div>
        
        <div class="form-row">
            <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
            <input type="text" id="node-input-name" placeholder="Name">
        </div>
        <div class="form-tips"><b>Tip:</b> The name should be alphanumeric, including underscores and hyphens (no spaces).</div>
    </div>
    

    <div class="form-row">
        <label for="node-input-description"><i class="fa fa-tag"></i>Intent Description</label>
        <input type="text" id="node-input-description" placeholder="Description">
    </div>

    <div style="display: flex; justify-content: space-around;">

        <label for="node-input-excludeFromOpenAi" style="display: flex;">
            <i class="fa fa-tag"></i>
            <span style="margin-left: 5px;">Exclude from OpenAI</span>
            <input style="display: inline-block;margin-left: 1rem;" type="checkbox" id="node-input-excludeFromOpenAi"
                name="enable conversation"></label>
    </div>
  
</script>

<script type="text/html" data-help-name="注册意图">
    <p>Creates a listener for a specific event and triggers when the event is fired</p>
    
    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>Name
            <span class="property-type">string</span>
        </dt>
        <dd>Must be unique to identify an automation. It should also use camel case</dd>

        <dt>Description
            <span class="property-type">string</span>
        </dt>
        <dd>Describes what the registered intent should be used for. OpenAI will use this as a description when 
            sending this intent as a function payload.</dd>
    
        <dt class="optional">Exclude from OpenAI
            <span class="property-type">boolean</span>
        </dt>
        <dd>If true, this intent will not be sent to OpenAI as a callable function</dd>
    
    </dl>
    
    <h3>Details</h3>
    <p>Place this node at the beginning of an automation to register it to be called by the <code>Call-Intent</code> node.
        Registering an intent is useful for integration with AI as the AI can use the <b>Description</b> to 
        determine the circumstances in which the intent should be called. As a result, make the <b>Description</b> as clear and succinct 
        as possible.</p>
<p>As this node is a custom trigger, OpenAI, by default, will add it to its list of functions it can call to 
    handle user requests. If this is negatively affecting OpenAI results or if you do not want this function 
    to be considered by OpenAI, set <b>Exclude from OpenAI</b> to <code>true</code> 
</p>
</script>
