<script type="text/javascript">
    RED.nodes.registerType("AI 工具", {
        category: 'AI 意图',
        color: '#f1c40f',
        icon:"font-awesome/fa-wrench",
        defaults: {
            name: { value: "" },
            tool: { value: "" }
        },
        inputs: 1,
        outputs: 1,

        label: function () {
            return this.name || "AI 工具";
        },
         oneditprepare: function () {

            $("#node-input-tool").typedInput({
                type: "json"
            })
        }    
    });
</script>

<script type="text/html" data-template-name="AI 工具">

    <div class="form-row">
        <label for="node-input-name"> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>

    <div class="form-row">
        <label for="node-input-tool">Tool Definition</label>
        
        <input id="node-input-tool" name="openai Tool"/>
    </div>
   
</script>

<script type="text/html" data-help-name="AI 工具">
    <p>Function that OpenAI can reference to respond more effectively to peculiar requests</p>
    
    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>Tool Definition
            <span class="property-type">json</span>
        </dt>
        <dd> JSON schema defining the function that GPT can call to do the work. Check the <a href="https://platform.openai.com/docs/api-reference/chat/create">documentation</a> 
            to see how to write the JSON schema </dd>
    </dl>

    <h3>Details</h3>
    <p>This node should come before the <code>AI Chat</code> node, as this OpenAI Tool node adds the functions to 
        the msg object for the <code>AI Chat</code> to use. OpenAI is experimental, so you may need to make many adjustments 
        to get the desired results.</p>
</script>
